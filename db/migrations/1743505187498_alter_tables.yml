database:
  engine: postgres
schema:
  version: 1743505187498
  name: alter_tables
  tables:
    users:
      columns:
        id:
          type: SERIAL
          constraints:
            - PRIMARY KEY
        first_name:
          type: VARCHAR(100)
          constraints:
            - NOT NULL
        last_name:
          type: VARCHAR(100)
          constraints:
            - NOT NULL
        email:
          type: VARCHAR(255)
          constraints:
            - NOT NULL
            - UNIQUE
        password_hash:
          type: VARCHAR(255)
          constraints:
            - NOT NULL
        status:
          type: VARCHAR(20)
          default: "active"
        last_login_at:
          type: TIMESTAMP WITH TIME ZONE
        created_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
        updated_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
      indexes: []
      foreign_keys: []

    user_profiles:
      columns:
        id:
          type: SERIAL
          constraints:
            - PRIMARY KEY
        user_id:
          type: INTEGER
          constraints:
            - NOT NULL
            - UNIQUE
        bio:
          type: TEXT
          default: "No bio provided"
        avatar_url:
          type: VARCHAR(255)
        birth_date:
          type: DATE
        created_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
        updated_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
      indexes: []
      foreign_keys:
        - columns: [user_id]
          references:
            table: users
            columns: [id]
          on_delete: CASCADE

    posts:
      columns:
        id:
          type: SERIAL
          constraints:
            - PRIMARY KEY
        user_id:
          type: INTEGER
          constraints:
            - NOT NULL
        title:
          type: VARCHAR(255)
          constraints:
            - NOT NULL
        content:
          type: TEXT
          constraints:
            - NOT NULL
        published:
          type: BOOLEAN
          default: FALSE
        likes_count:
          type: INTEGER
          default: 0
        created_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
        updated_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
      indexes: []
      foreign_keys:
        - columns: [user_id]
          references:
            table: users
            columns: [id]
          on_delete: CASCADE

    roles:
      columns:
        id:
          type: SERIAL
          constraints:
            - PRIMARY KEY
        name:
          type: VARCHAR(50)
          constraints:
            - NOT NULL
            - UNIQUE
        description:
          type: TEXT
        created_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
      indexes: []
      foreign_keys: []

    users_roles:
      columns:
        id:
          type: SERIAL
          constraints:
            - PRIMARY KEY
        user_id:
          type: INTEGER
          constraints:
            - NOT NULL
        role_id:
          type: INTEGER
          constraints:
            - NOT NULL
        assigned_at:
          type: TIMESTAMP WITH TIME ZONE
          default: CURRENT_TIMESTAMP
      indexes: []
      foreign_keys:
        - columns: [user_id]
          references:
            table: users
            columns: [id]
          on_delete: CASCADE
        - columns: [role_id]
          references:
            table: roles
            columns: [id]
          on_delete: CASCADE
